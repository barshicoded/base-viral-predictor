<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viral Predictor - Guess Base Social Metrics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%); min-height: 100vh; }
        .glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
        .gradient-text { background: linear-gradient(135deg, #0052ff 0%, #00d4ff 50%, #10b981 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .glow-blue { box-shadow: 0 0 30px rgba(0, 82, 255, 0.3); }
        .input-glow:focus { box-shadow: 0 0 0 3px rgba(0, 82, 255, 0.3); }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 212, 255, 0.3); }
            50% { box-shadow: 0 0 40px rgba(0, 212, 255, 0.6); }
        }
        .pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }
        .metric-card { transition: all 0.3s ease; }
        .metric-card:hover { transform: translateY(-2px); background: rgba(255,255,255,0.05); }
    </style>
</head>
<body class="text-white">
    <!-- Header -->
    <header class="border-b border-white/10 bg-black/20">
        <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 via-cyan-400 to-green-400 flex items-center justify-center font-bold text-lg pulse-glow">üìà</div>
                <div>
                    <h1 class="font-bold text-xl">Viral Predictor</h1>
                    <p class="text-xs text-gray-400">Guess Base Social metrics. Win bragging rights.</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <a href="https://x.com/fitiwins" target="_blank" class="text-sm text-gray-400 hover:text-white transition">@fitiwins</a>
                <div class="px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs">
                    üèÜ <span id="userStreak">0</span> streak
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8">
        <!-- Hero -->
        <div class="text-center mb-10">
            <h2 class="text-4xl md:text-5xl font-bold mb-4">
                <span class="gradient-text">Predict the Viral.</span>
            </h2>
            <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                Paste a Base social post. Guess its metrics in 24 hours. 
                Closest predictions climb the leaderboard.
            </p>
        </div>

        <!-- Input Section -->
        <div class="glass rounded-2xl p-6 mb-8 glow-blue">
            <label class="block text-sm font-medium mb-3 text-gray-300">Base Social Post URL</label>
            <div class="flex gap-3">
                <input type="text" id="postUrl" placeholder="https://base.org/post/... or Warpcast URL"
                    class="flex-1 px-4 py-3 rounded-xl bg-black/30 border border-white/10 text-white placeholder-gray-500 focus:outline-none input-glow transition">
                <button onclick="fetchPost()" class="px-6 py-3 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-400 hover:to-cyan-400 font-semibold transition">
                    Load Post
                </button>
            </div>
            <p class="text-xs text-gray-500 mt-2">Works with Base App URLs and Warpcast cast URLs</p>
        </div>

        <!-- Post Preview (Hidden by default) -->
        <div id="postPreview" class="hidden mb-8">
            <div class="glass rounded-2xl p-6 border border-blue-500/30">
                <div class="flex items-start gap-4">
                    <div id="authorAvatar" class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-xl">üë§</div>
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <span id="authorName" class="font-semibold">@username</span>
                            <span class="text-xs text-gray-500">¬∑ 2h ago</span>
                        </div>
                        <p id="postContent" class="text-gray-200 mb-3">Post content goes here...</p>
                        <div class="flex items-center gap-4 text-sm text-gray-500">
                            <span>‚ù§Ô∏è <span id="currentLikes">0</span></span>
                            <span>üîÑ <span id="currentRecasts">0</span></span>
                            <span>üí¨ <span id="currentComments">0</span></span>
                            <span>üí∞ <span id="currentTips">0</span> ETH</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Prediction Form (Hidden by default) -->
        <div id="predictionForm" class="hidden">
            <h3 class="text-xl font-semibold mb-4">üîÆ Your 24h Prediction</h3>
            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <div class="metric-card glass rounded-xl p-4">
                    <label class="block text-sm text-gray-400 mb-2">‚ù§Ô∏è Likes</label>
                    <input type="number" id="predLikes" min="0" placeholder="Current + ?"
                        class="w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white focus:border-blue-500 focus:outline-none">
                    <p class="text-xs text-gray-500 mt-1">Current: <span class="current-val">0</span></p>
                </div>
                <div class="metric-card glass rounded-xl p-4">
                    <label class="block text-sm text-gray-400 mb-2">üîÑ Recasts</label>
                    <input type="number" id="predRecasts" min="0" placeholder="Current + ?"
                        class="w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white focus:border-blue-500 focus:outline-none">
                    <p class="text-xs text-gray-500 mt-1">Current: <span class="current-val">0</span></p>
                </div>
                <div class="metric-card glass rounded-xl p-4">
                    <label class="block text-sm text-gray-400 mb-2">üí¨ Comments</label>
                    <input type="number" id="predComments" min="0" placeholder="Current + ?"
                        class="w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white focus:border-blue-500 focus:outline-none">
                    <p class="text-xs text-gray-500 mt-1">Current: <span class="current-val">0</span></p>
                </div>
                <div class="metric-card glass rounded-xl p-4">
                    <label class="block text-sm text-gray-400 mb-2">üí∞ Tips (ETH)</label>
                    <input type="number" id="predTips" min="0" step="0.001" placeholder="0.00"
                        class="w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white focus:border-blue-500 focus:outline-none">
                    <p class="text-xs text-gray-500 mt-1">Current: <span class="current-val">0</span> ETH</p>
                </div>
            </div>

            <div class="glass rounded-xl p-4 mb-6 bg-yellow-500/5 border-yellow-500/20">
                <div class="flex items-center gap-2 mb-2">
                    <span class="text-yellow-400">‚ö†Ô∏è</span>
                    <span class="font-medium text-yellow-400">How scoring works</span>
                </div>
                <p class="text-sm text-gray-400">
                    Predictions lock in 1 hour. Closest guess to actual 24h metrics wins. 
                    Ties broken by submission time. Points = accuracy percentage.
                </p>
            </div>

            <button onclick="submitPrediction()" class="w-full py-4 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-400 hover:to-emerald-400 font-bold text-lg transition">
                Submit Prediction üéØ
            </button>
        </div>

        <!-- Active Predictions -->
        <div class="mt-12">
            <h3 class="text-xl font-semibold mb-4">üî• Active Predictions</h3>
            <div id="activePredictions" class="space-y-4">
                <!-- Example prediction -->
                <div class="glass rounded-xl p-4 border border-white/5">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <span class="text-2xl">üéØ</span>
                            <span class="font-medium">@dwr.eth's launch post</span>
                        </div>
                        <span class="text-xs px-2 py-1 rounded-full bg-yellow-500/20 text-yellow-400">‚è∞ 18h left</span>
                    </div>
                    <div class="grid grid-cols-4 gap-2 text-center text-sm">
                        <div class="bg-white/5 rounded-lg p-2">
                            <div class="text-gray-400 text-xs">‚ù§Ô∏è Likes</div>
                            <div class="font-semibold">1,420</div>
                            <div class="text-xs text-gray-500">pred: 2,500</div>
                        </div>
                        <div class="bg-white/5 rounded-lg p-2">
                            <div class="text-gray-400 text-xs">üîÑ Recasts</div>
                            <div class="font-semibold">234</div>
                            <div class="text-xs text-gray-500">pred: 400</div>
                        </div>
                        <div class="bg-white/5 rounded-lg p-2">
                            <div class="text-gray-400 text-xs">üí¨ Comments</div>
                            <div class="font-semibold">89</div>
                            <div class="text-xs text-gray-500">pred: 150</div>
                        </div>
                        <div class="bg-white/5 rounded-lg p-2">
                            <div class="text-gray-400 text-xs">üí∞ Tips</div>
                            <div class="font-semibold">0.45</div>
                            <div class="text-xs text-gray-500">pred: 1.2</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div class="mt-12">
            <h3 class="text-xl font-semibold mb-4">üèÜ Top Predictors</h3>
            <div class="glass rounded-xl overflow-hidden">
                <div class="grid grid-cols-4 gap-4 p-4 border-b border-white/10 text-sm text-gray-400">
                    <span>Rank</span>
                    <span>User</span>
                    <span class="text-right">Accuracy</span>
                    <span class="text-right">Predictions</span>
                </div>
                <div id="leaderboard" class="divide-y divide-white/5">
                    <div class="grid grid-cols-4 gap-4 p-4 items-center">
                        <span class="text-2xl">ü•á</span>
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-purple-500"></div>
                            <span class="font-medium">@basegod.eth</span>
                        </div>
                        <span class="text-right font-bold text-green-400">94.2%</span>
                        <span class="text-right text-gray-400">47</span>
                    </div>
                    <div class="grid grid-cols-4 gap-4 p-4 items-center">
                        <span class="text-2xl">ü•à</span>
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-blue-500"></div>
                            <span class="font-medium">@jessepollak</span>
                        </div>
                        <span class="text-right font-bold text-green-400">91.8%</span>
                        <span class="text-right text-gray-400">23</span>
                    </div>
                    <div class="grid grid-cols-4 gap-4 p-4 items-center">
                        <span class="text-2xl">ü•â</span>
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-green-500"></div>
                            <span class="font-medium">@fitiwins</span>
                        </div>
                        <span class="text-right font-bold text-green-400">89.5%</span>
                        <span class="text-right text-gray-400">12</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/10 mt-12 py-6">
        <div class="max-w-6xl mx-auto px-4 text-center text-sm text-gray-500">
            <p>Built for the Base ecosystem ‚Ä¢ Not affiliated with Coinbase</p>
        </div>
    </footer>

    <script>
        // Mock data for demo
        const mockPosts = {
            'default': {
                author: '@jessepollak',
                avatar: 'üë®‚Äçüíª',
                content: 'Base is for everyone. The next billion users are coming onchain. Who\'s building something special? üëá',
                likes: 2847,
                recasts: 523,
                comments: 189,
                tips: 1.42
            }
        };

        function fetchPost() {
            const url = document.getElementById('postUrl').value;
            if (!url) {
                alert('Please enter a post URL');
                return;
            }

            // Simulate fetching post data
            // In production, this would call Farcaster/Base APIs
            const post = mockPosts.default;
            
            document.getElementById('authorName').textContent = post.author;
            document.getElementById('authorAvatar').textContent = post.avatar;
            document.getElementById('postContent').textContent = post.content;
            document.getElementById('currentLikes').textContent = post.likes.toLocaleString();
            document.getElementById('currentRecasts').textContent = post.recasts.toLocaleString();
            document.getElementById('currentComments').textContent = post.comments.toLocaleString();
            document.getElementById('currentTips').textContent = post.tips;

            // Update current values in prediction form
            document.querySelectorAll('.current-val').forEach((el, i) => {
                const values = [post.likes, post.recasts, post.comments, post.tips];
                el.textContent = values[i].toLocaleString();
            });

            // Show preview and form
            document.getElementById('postPreview').classList.remove('hidden');
            document.getElementById('predictionForm').classList.remove('hidden');
        }

        function submitPrediction() {
            const likes = document.getElementById('predLikes').value;
            const recasts = document.getElementById('predRecasts').value;
            const comments = document.getElementById('predComments').value;
            const tips = document.getElementById('predTips').value;

            if (!likes || !recasts || !comments || !tips) {
                alert('Please fill in all predictions!');
                return;
            }

            // In production, this would save to a database
            alert('Prediction submitted! üéØ\n\nCome back in 24 hours to see results.');
            
            // Reset form
            document.getElementById('predLikes').value = '';
            document.getElementById('predRecasts').value = '';
            document.getElementById('predComments').value = '';
            document.getElementById('predTips').value = '';
        }

        // Load streak from localStorage
        const streak = localStorage.getItem('predictionStreak') || 0;
        document.getElementById('userStreak').textContent = streak;
    </script>
</body>
</html>
